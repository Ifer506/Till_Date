{"version":3,"names":["getPrototypeOf","setPrototypeOf","isNativeFunction","construct","_wrapNativeSuper","Class","_cache","Map","undefined","TypeError","has","get","set","Wrapper","arguments","constructor","prototype","Object","create","value","enumerable","writable","configurable"],"sources":["../../src/helpers/wrapNativeSuper.ts"],"sourcesContent":["/* @minVersion 7.0.0-beta.0 */\n\n// Based on https://github.com/WebReflection/babel-plugin-transform-builtin-classes\n\nimport getPrototypeOf from \"./getPrototypeOf.ts\";\nimport setPrototypeOf from \"./setPrototypeOf.ts\";\nimport isNativeFunction from \"./isNativeFunction.ts\";\nimport construct from \"./construct.ts\";\n\nexport default function _wrapNativeSuper(Class: Function | null) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  // @ts-expect-error -- reuse function id for helper size\n  _wrapNativeSuper = function _wrapNativeSuper(Class: Function | null) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      // @ts-expect-error -- we are sure Class is a function here\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true,\n      },\n    });\n\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}\n"],"mappings":"AAIA,OAAOA,cAAc,MAAM,qBAAqB;AAChD,OAAOC,cAAc,MAAM,qBAAqB;AAChD,OAAOC,gBAAgB,MAAM,uBAAuB;AACpD,OAAOC,SAAS,MAAM,gBAAgB;AAEtC,eAAe,SAASC,gBAAgBA,CAACC,KAAsB,EAAE;EAC/D,IAAIC,MAAM,GAAG,OAAOC,GAAG,KAAK,UAAU,GAAG,IAAIA,GAAG,CAAC,CAAC,GAAGC,SAAS;EAG9DJ,gBAAgB,GAAG,SAASA,gBAAgBA,CAACC,KAAsB,EAAE;IACnE,IAAIA,KAAK,KAAK,IAAI,IAAI,CAACH,gBAAgB,CAACG,KAAK,CAAC,EAAE,OAAOA,KAAK;IAC5D,IAAI,OAAOA,KAAK,KAAK,UAAU,EAAE;MAC/B,MAAM,IAAII,SAAS,CAAC,oDAAoD,CAAC;IAC3E;IACA,IAAI,OAAOH,MAAM,KAAK,WAAW,EAAE;MACjC,IAAIA,MAAM,CAACI,GAAG,CAACL,KAAK,CAAC,EAAE,OAAOC,MAAM,CAACK,GAAG,CAACN,KAAK,CAAC;MAC/CC,MAAM,CAACM,GAAG,CAACP,KAAK,EAAEQ,OAAO,CAAC;IAC5B;IAEA,SAASA,OAAOA,CAAA,EAAG;MAEjB,OAAOV,SAAS,CAACE,KAAK,EAAES,SAAS,EAAEd,cAAc,CAAC,IAAI,CAAC,CAACe,WAAW,CAAC;IACtE;IACAF,OAAO,CAACG,SAAS,GAAGC,MAAM,CAACC,MAAM,CAACb,KAAK,CAACW,SAAS,EAAE;MACjDD,WAAW,EAAE;QACXI,KAAK,EAAEN,OAAO;QACdO,UAAU,EAAE,KAAK;QACjBC,QAAQ,EAAE,IAAI;QACdC,YAAY,EAAE;MAChB;IACF,CAAC,CAAC;IAEF,OAAOrB,cAAc,CAACY,OAAO,EAAER,KAAK,CAAC;EACvC,CAAC;EAED,OAAOD,gBAAgB,CAACC,KAAK,CAAC;AAChC","ignoreList":[]}